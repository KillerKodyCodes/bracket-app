<div class="tournament-container flex flex-row gap-10 p-5">

    <!-- Winners Bracket -->
    <div class="winners-bracket flex flex-col gap-8">
        <h2 class="text-center font-bold mb-2">Winners Bracket</h2>

        @for ( round of tournamentBracket.winners; track $index; let roundIndex = $index) {
        <div class="round border rounded p-2 flex flex-col gap-4">
            <h3 class="text-center font-semibold">Round {{round.roundNumber}}</h3>

            @for ( match of round.roundMatches; track $index; let matchIndex = $index) {
            <div class="match flex justify-between items-center border rounded p-2 bg-gray-100">
                <div class="player w-24 text-right">{{match.player1 || 'Bye'}}</div>
                <div class="vs mx-2">vs</div>
                <div class="player w-24 text-left">{{match.player2 || 'Bye'}}</div>
                <div class="winner-select ml-4">
                    <select [(ngModel)]="match.winner" (change)="setWinner('W', roundIndex, matchIndex, $event)">
                        <option value=0>Select...</option>
                        <option value=1>{{match.player1 || 'Bye'}}</option>
                        <option value=2>{{match.player2 || 'Bye'}}</option>
                    </select>
                </div>
            </div>
            }
        </div>
        }
    </div>

    <!-- Losers Bracket -->
    <div class="losers-bracket flex flex-col gap-8">
        <h2 class="text-center font-bold mb-2">Losers Bracket</h2>

        @for ( round of tournamentBracket.losers; track $index; let roundIndex = $index) {
        <div class="round border rounded p-2 flex flex-col gap-4">
            <h3 class="text-center font-semibold">Round {{round.roundNumber}}</h3>

            @for ( match of round.roundMatches; track $index; let matchIndex = $index) {
            <div class="match flex justify-between items-center border rounded p-2 bg-red-50">
                <div class="player w-24 text-right">{{match.player1 || 'Bye'}}</div>
                <div class="vs mx-2">vs</div>
                <div class="player w-24 text-left">{{match.player2 || 'Bye'}}</div>
                <div class="winner-select ml-4">
                    <select [(ngModel)]="match.winner" (change)="setWinner('L', roundIndex, matchIndex, $event)">
                        <option value=0>Select...</option>
                        <option value=1>{{match.player1 || 'Bye'}}</option>
                        <option value=2>{{match.player2 || 'Bye'}}</option>
                    </select>
                </div>
            </div>
            }
        </div>
        }
    </div>
</div>